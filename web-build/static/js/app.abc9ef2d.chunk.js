(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{173:function(e,t,a){"use strict";a.d(t,"a",(function(){return $}));var n=a(25),r=a.n(n),l=a(0),o=a.n(l),c=a(790),i=a(17),s=a.n(i),u=a(20),m=a.n(u),f=a(13),d=a.n(f),b=a(788),p=a(789),g=a(108);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=a(8),v=a(39),k=a(10),C=a.n(k),x=a(26),w=a(9),S={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff"}},I=a(75);var O=["style","lightColor","darkColor"];function T(e,t){var a=Object(I.a)(),n=e[a];return n||S[a][t]}function j(e){var t=e.style,a=e.lightColor,n=e.darkColor,o=C()(e,O),c=T({light:a,dark:n},"background");return l.createElement(w.a,r()({style:[{backgroundColor:c},t]},o))}var P=a(107),D=a(12);function V(e){var t=e.itemToValidate,a=e.markAsUsed,n=Object(l.useState)(null),r=m()(n,2),c=r[0],i=r[1],s=Object(l.useState)(!1),u=m()(s,2),f=u[0],b=u[1],p=Object(l.useState)(!1),g=m()(p,2),y=g[0],E=g[1],v=Object(l.useState)(null),k=m()(v,2),C=k[0],S=k[1],I=Object(l.useState)([""]),O=m()(I,2),T=O[0],j=O[1];Object(l.useEffect)((function(){!function(){var e,t;d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(P.a.requestPermissionsAsync());case 2:e=a.sent,t=e.status,i("granted"===t);case 5:case"end":return a.stop()}}),null,null,null,Promise)}()}),[]);var D=function(e){fetch("https://sjezd-qr-ticket.herokuapp.com/get/"+e).then((function(e){return e.json()})).then((function(e){S(e.message[0]),j(function(e,t){var a=function(e,t){return e?e&&e.hasOwnProperty("timestamp_"+t)&&null!==e["timestamp_"+t]?"used":e&&e.hasOwnProperty(t)&&["true","all","sobota","maso","bezmaso"].includes(e[t])?"ok":e&&e.hasOwnProperty(t)&&[null,"",!1].includes(e[t])?"not":"error":"error"}(e,t);return"used"==a?["yellow","Vstupenka ji\u017e byla odbavena d\u0159\xedve!"]:"ok"==a?["green","Vstupenka odbavena."]:"not"==a?["orange","Nezakoupeno!"]:["red","Nastala chyba"]}(C,t))})).catch((function(e){alert("ERROR: Chyba p\u0159ipojen\xed k datab\xe1zi p\u0159i na\u010d\xedt\xe1n\xed vstupenky."+e)}))};return null===c?o.a.createElement(x.a,null,"Requesting for camera permission"):!1===c?o.a.createElement(x.a,null,"No access to camera"):o.a.createElement(w.a,{style:M.container},o.a.createElement(B,{modalVisiblity:y,setModalVisiblity:E,setScanned:b,responseToModal:C,itemToValidate:t,markAsUsed:a,dataToModal:T}),o.a.createElement(P.a,{onBarCodeScanned:f?void 0:function(e){e.type;var t=e.data;b(!0),E(!0),D(t)},style:[h.a.absoluteFill,M.camera]},o.a.createElement(w.a,{style:M.layerTop}),o.a.createElement(w.a,{style:M.layerCenter},o.a.createElement(w.a,{style:M.layerLeft}),o.a.createElement(w.a,{style:M.focused}),o.a.createElement(w.a,{style:M.layerRight})),o.a.createElement(w.a,{style:M.layerBottom})))}function B(e){var t=e.modalVisiblity,a=e.setModalVisiblity,n=e.setScanned,r=(e.responseToModal,e.itemToValidate),l=(e.markAsUsed,e.dataToModal);return o.a.createElement(D.Layout,{style:M.container,level:"1"},o.a.createElement(D.Modal,{visible:t},o.a.createElement(D.Card,{disabled:!0},l?o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,null,r),o.a.createElement(x.a,null,"TODO Barva ma byt - ",l[0]," "),o.a.createElement(x.a,null,l[1]," ")):o.a.createElement(x.a,null,"Loading"),o.a.createElement(D.Button,{onPress:function(){a(!1),n(!1)}},"CLOSE"))))}var L="rgba(0, 0, 0, .4)",M=h.a.create({container:{left:0,right:0,top:0,bottom:0,position:"absolute"},camera:{flex:1,width:"100%",flexDirection:"column"},layerTop:{flex:2,backgroundColor:L},layerCenter:{flex:3,flexDirection:"row"},layerLeft:{flex:1,backgroundColor:L},focused:{flex:10},layerRight:{flex:1,backgroundColor:L},layerBottom:{flex:2,backgroundColor:L}});function R(e){var t=e.itemToValidate,a=e.markAsUsed;return o.a.createElement(j,{style:U.container},o.a.createElement(V,{itemToValidate:t,markAsUsed:a}),o.a.createElement(A,null))}function A(){var e=o.a.useState(""),t=m()(e,2),a=t[0],n=t[1],l=function(){n("")};return o.a.createElement(j,{style:U.searchBox},o.a.createElement(D.Input,{value:a,autoCapitalize:"none",autoCorrect:!1,placeholder:"Scan QR",status:"control",size:"large",style:U.searchBar,clearButtonMode:"while-editing",accessoryRight:function(e){return o.a.createElement(v.a,{onPress:l},o.a.createElement(D.Icon,r()({},e,{name:"close-outline"})))},onChangeText:function(e){return n(e)}}))}var U=h.a.create({container:{flex:1,width:"100%",justifyContent:"space-between",flexDirection:"column",minHeight:144},searchBox:{backgroundColor:"transparent",height:"70%",justifyContent:"flex-end"},searchBar:{width:"100%",alignSelf:"center",textAlign:"center",backgroundColor:"rgba(80,80,80,0.5)"},button:{alignSelf:"flex-start"},backdrop:{backgroundColor:"rgba(0, 0, 0, 0.5)"}}),z=[{title:"Karel Novak",description:"TICKET ID 0001"},{title:"Pavel Mrazek",description:"TICKET ID 0002"},{title:"Filip Klad\u0148\xe1k",description:"TICKET ID 0003"}],_=function(e){return o.a.createElement(D.Icon,r()({},e,{name:"arrow-ios-forward-outline"}))};function F(){var e=o.a.useState(""),t=m()(e,2),a=t[0],n=t[1],l=function(){n("")};return o.a.createElement(D.Input,{value:a,autoCapitalize:"none",autoCorrect:!1,placeholder:"Search",style:K.searchBar,clearButtonMode:"while-editing",accessoryRight:function(e){return o.a.createElement(v.a,{onPress:l},o.a.createElement(D.Icon,r()({},e,{name:"close-outline"})))},onChangeText:function(e){return n(e)}})}function N(){var e=function(e){return o.a.createElement(D.Icon,r()({},e,{name:"person"}))},t=function(e){return o.a.createElement(D.Icon,r()({},e,{name:"edit"}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.TopNavigation,{title:"List of tickets",accessoryRight:function(){return o.a.createElement(D.TopNavigationAction,{icon:_})}}),o.a.createElement(D.Divider,null),o.a.createElement(D.List,{style:K.list,data:z,renderItem:function(a){var n=a.item,r=a.index;return o.a.createElement(D.ListItem,{key:r,title:n.title,description:n.description,accessoryLeft:e,accessoryRight:t,style:K.listItem})}}),o.a.createElement(D.Divider,null),o.a.createElement(F,null))}var K=h.a.create({list:{width:"100%",backgroundColor:"#f4f4f4"},listItem:{backgroundColor:"#f4f4f4"},searchBar:{backgroundColor:"#fff",padding:10,color:"#000",borderColor:"#aaa",borderRadius:24,alignItems:"center",justifyContent:"center"}});function q(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.TopNavigation,{title:"Screen for testing"}),o.a.createElement(G,null))}function G(){var e=o.a.useState(!1),t=m()(e,2),a=t[0],n=t[1];return o.a.createElement(D.Layout,{style:H.container,level:"1"},o.a.createElement(D.Button,{onPress:function(){return n(!0)}},"TOGGLE MODAL"),o.a.createElement(D.Modal,{visible:a},o.a.createElement(D.Card,{disabled:!0},o.a.createElement(D.Text,null,"Welcome to UI Kitten \ud83d\ude3b"),o.a.createElement(D.Button,{onPress:function(){return n(!1)}},"DISMISS"))))}var H=h.a.create({container:{flex:1,width:"100%",justifyContent:"space-between",flexDirection:"column",minHeight:144},searchBar:{width:"50%",alignSelf:"center",textAlign:"center",backgroundColor:"rgba(80,80,80,0.5)"},searchBox:{backgroundColor:"transparent",height:"70%",justifyContent:"flex-end"}});function J(e){e.itemToValidate;var t=e.setItemToValidate,a=e.setMarkAsUsed,n=[{column:"registration",name:"Registrace"},{column:"dinner_fri",name:"Ve\u010de\u0159e p\xe1tek"},{column:"breakfast_sat",name:"Sn\xeddan\u011b sobota"},{column:"lunch_sat",name:"Ob\u011bd sobota"},{column:"dinner_sat",name:"Ve\u010de\u0159e sobota"},{column:"breakfast_sun",name:"Sn\xeddan\u011b ned\u011ble"},{column:"snack_sun",name:"Bal\xed\u010dek na cestu"}],r=o.a.useState(!0),l=m()(r,2),c=l[0],i=l[1],s=o.a.useState(new D.IndexPath(0)),u=m()(s,2),f=u[0],d=u[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.Toggle,{checked:c,onChange:function(e){i(e),a(e)}},"Validate: "+c),o.a.createElement(D.Drawer,{selectedIndex:f,onSelect:function(e){d(e),t(function(e){return n[e-1].column}(e))}},n.map((function(e,t){return o.a.createElement(D.DrawerItem,{key:t,title:e.name})}))))}h.a.create({});function Q(){var e=o.a.useState(0),t=m()(e,2),a=t[0],n=t[1],r=o.a.useState("registration"),l=m()(r,2),c=l[0],i=l[1],s=o.a.useState(!0),u=m()(s,2),f=u[0],d=u[1];return o.a.createElement(D.ViewPager,{selectedIndex:a,onSelect:function(e){return n(e)},style:W.viewpager},o.a.createElement(D.Layout,{level:"1"},o.a.createElement(J,{itemToValidate:c,setItemToValidate:i,setMarkAsUsed:d})),o.a.createElement(D.Layout,{style:W.tab,level:"1"},o.a.createElement(R,{itemToValidate:c,markAsUsed:f})),o.a.createElement(D.Layout,{style:W.tab,level:"1"},o.a.createElement(N,null)),o.a.createElement(D.Layout,{style:W.tab,level:"1"},o.a.createElement(q,null)))}var W=h.a.create({tab:{flex:1,alignItems:"center",justifyContent:"center"},viewpager:{flex:1}}),X=a(106),Y=a(172),Z=a(78);function $(){return function(){var e=l.useState(!1),t=m()(e,2),n=t[0],r=t[1];return l.useEffect((function(){d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.b(),e.next=4,d.a.awrap(p.b(E(E({},b.a.font),{},{"space-mono":a(193)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,r(!0),g.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),n}()?o.a.createElement(o.a.Fragment,null,o.a.createElement(D.IconRegistry,{icons:Y.EvaIconsPack}),o.a.createElement(D.ApplicationProvider,r()({},X,{theme:X.light}),o.a.createElement(c.a,null,o.a.createElement(Z.a,{hidden:!0}),o.a.createElement(Q,null)))):null}},176:function(e,t,a){e.exports=a(782)},193:function(e,t,a){e.exports=a.p+"./fonts/SpaceMono-Regular.ttf"}},[[176,1,2]]]);
//# sourceMappingURL=app.abc9ef2d.chunk.js.map